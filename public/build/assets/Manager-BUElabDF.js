import{r as o,j as s,b as u}from"./app-DeyD0YJM.js";import{A as $}from"./AppLayout-DdE95dyF.js";import{U as h}from"./users-DR3S7fY7.js";import{C as y}from"./clock-DwtAG6FA.js";import{c as B}from"./createLucideIcon-Cc44qyyy.js";import{C}from"./circle-check-big-_usF_w8l.js";import{C as x}from"./circle-plus-_AtZGtgj.js";import{E as L}from"./eye-BbvsVSXa.js";import{T as q}from"./trash-2-D_SEweL6.js";import{C as k}from"./circle-alert-DYrdqRgD.js";/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],T=B("circle-pause",J),ae=({employees:S,tasks:A,clients:E,flash:p})=>{const[c,Q]=o.useState(A||[]),[i,R]=o.useState(S||[]),[b,V]=o.useState(E||[]),[n,f]=o.useState({category:"",client:""}),[t,g]=o.useState({task:"",employeeId:"",client:"",due:"",expectedTimeline:""}),[r,m]=o.useState({name:"",category:"",subCategory:"",manager:"",password:""}),[j,w]=o.useState(""),I=["Frontend Developers","Backend Developers","Full Stack Developers","QA Engineers","DevOps","UI/UX Designers","Project Managers"],P=o.useMemo(()=>[...new Set(i.map(e=>e.category).filter(Boolean))].sort(),[i]),N=o.useMemo(()=>c.filter(e=>{const a=i.find(_=>_.id===e.employeeId),l=!n.category||(a==null?void 0:a.category)===n.category,d=!n.client||e.client===n.client;return l&&d}),[c,i,n]),v=(e,a)=>{var l;return((l=a.find(d=>d.id===e.employeeId))==null?void 0:l.name)||"Unknown"},z=(e,a)=>{var l;return((l=a.find(d=>d.id===e.employeeId))==null?void 0:l.category)||""},M=()=>{t.task&&t.employeeId&&t.client&&t.due&&u.post("/manager/add-task",{task:t.task,employee_id:t.employeeId,client:t.client,due:t.due,expected_timeline:t.expectedTimeline||null},{onSuccess:()=>{g({task:"",employeeId:"",client:"",due:"",expectedTimeline:""})}})},D=()=>{r.name&&r.category&&r.manager&&r.password&&r.password.length>=6?u.post("/manager/add-employee",{name:r.name,category:r.category,subCategory:r.subCategory||null,manager:r.manager,password:r.password},{onSuccess:()=>{m({name:"",category:"",subCategory:"",manager:"",password:""})}}):alert("Password must be at least 6 characters.")},F=()=>{const e=j.trim();e&&u.post("/manager/add-client",{name:e},{onSuccess:()=>w("")})},O=e=>{confirm("Are you sure you want to delete this task? This action cannot be undone.")&&u.delete(`/manager/task/${e}`)},U=e=>{switch(e){case"Finished":return s.jsx(C,{className:"w-4 h-4"});case"Pending":return s.jsx(y,{className:"w-4 h-4 text-yellow-600"});case"In Progress":return s.jsx(k,{className:"w-4 h-4 text-blue-600"});case"On Hold":return s.jsx(T,{className:"w-4 h-4 text-orange-600"});default:return s.jsx(y,{className:"w-4 h-4"})}},H=e=>{switch(e){case"Finished":return"bg-purple-100 text-purple-800 border-purple-200";case"Pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"In Progress":return"bg-blue-100 text-blue-800 border-blue-200";case"On Hold":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return s.jsx($,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50 p-8 space-y-6",children:[(p==null?void 0:p.success)&&s.jsx("div",{className:"bg-green-100 text-green-800 p-3 rounded-md mb-4 animate-fade-in",children:p.success}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-800 flex items-center gap-3",children:"Manager Dashboard"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("select",{value:n.category,onChange:e=>f({...n,category:e.target.value}),className:"border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Categories"}),P.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:n.client,onChange:e=>f({...n,client:e.target.value}),className:"border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Clients"}),b.map(e=>s.jsx("option",{value:e,children:e},e))]})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[["Total Tasks",c.length,"from-blue-500 to-blue-600",s.jsx(h,{size:24})],["Pending / In Progress",c.filter(e=>["Pending","In Progress"].includes(e.status)).length,"from-cyan-500 to-blue-600",s.jsx(y,{size:24,className:"text-white/80"})],["On Hold",c.filter(e=>e.status==="On Hold").length,"from-orange-500 to-orange-600",s.jsx(T,{size:24,className:"text-white/80"})],["Finished",c.filter(e=>e.status==="Finished").length,"from-purple-500 to-purple-600",s.jsx(C,{size:24,className:"text-white/80"})]].map(([e,a,l,d])=>s.jsxs("div",{className:`bg-gradient-to-br ${l} text-white p-5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col items-center justify-center text-center`,children:[s.jsx("div",{className:"p-2 bg-white/10 rounded-full mb-2",children:d}),s.jsx("h2",{className:"font-semibold text-xs opacity-90",children:e}),s.jsx("p",{className:"text-2xl font-bold mt-1",children:a})]},e))}),s.jsxs("div",{className:"p-6 bg-white shadow-lg rounded-xl border border-gray-100",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-gray-800",children:[s.jsx(h,{className:"text-green-500",size:24})," Add New Employee"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[s.jsx("input",{type:"text",placeholder:"Employee Name",value:r.name,onChange:e=>m({...r,name:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),s.jsxs("select",{value:r.category,onChange:e=>m({...r,category:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Category"}),I.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsx("input",{type:"text",placeholder:"Sub-category (optional)",value:r.subCategory,onChange:e=>m({...r,subCategory:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),s.jsx("input",{type:"text",placeholder:"Manager Name",value:r.manager,onChange:e=>m({...r,manager:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),s.jsx("input",{type:"password",placeholder:"Password (min 6 chars)",value:r.password,onChange:e=>m({...r,password:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),s.jsxs("button",{onClick:D,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-all duration-200 font-medium flex items-center gap-2 shadow-md hover:shadow-lg",children:[s.jsx(x,{size:18})," Add Employee"]})]})]}),s.jsxs("div",{className:"p-6 bg-white shadow-lg rounded-xl border border-gray-100",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-gray-800",children:[s.jsx(h,{className:"text-indigo-500",size:24})," Add New Client"]}),s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsx("input",{type:"text",placeholder:"Client Name",value:j,onChange:e=>w(e.target.value),className:"flex-1 border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),s.jsxs("button",{onClick:F,className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-all duration-200 font-medium flex items-center gap-2 shadow-md hover:shadow-lg",children:[s.jsx(x,{size:18})," Add Client"]})]})]}),s.jsxs("div",{className:"p-6 bg-white shadow-lg rounded-xl border border-gray-100",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-gray-800",children:[s.jsx(x,{className:"text-blue-500",size:24})," Assign New Task"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[s.jsx("input",{type:"text",placeholder:"Task name",value:t.task,onChange:e=>g({...t,task:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsxs("select",{value:t.employeeId,onChange:e=>g({...t,employeeId:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Employee"}),i.map(e=>s.jsxs("option",{value:e.id,children:[e.name," (",e.category,")"]},e.id))]}),s.jsxs("select",{value:t.client,onChange:e=>g({...t,client:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Client"}),b.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsx("input",{type:"date",placeholder:"Manager Timeline",value:t.due,onChange:e=>g({...t,due:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("input",{type:"date",placeholder:"Expected Timeline",value:t.expectedTimeline,onChange:e=>g({...t,expectedTimeline:e.target.value}),className:"border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsxs("button",{onClick:M,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium flex items-center gap-2 shadow-md hover:shadow-lg",children:[s.jsx(x,{size:18})," Add Task"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsx("tr",{children:["Client","Employee","Category","Task","Status","Manager Timeline","Developer Timeline","Testing","Action"].map(e=>s.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-all duration-200 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.client}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:v(e,i)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-500",children:z(e,i)}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.task}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${H(e.status)}`,children:[U(e.status),s.jsx("span",{className:"ml-1",children:e.status})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:e.due}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:e.expectedTimeline||"Not set"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-gray-700",children:e.testingPoints.length}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[s.jsxs("button",{onClick:()=>{const a=v(e,i);localStorage.setItem("selectedTask",JSON.stringify({...e,developer:a})),u.visit(`/task/${e.id}`)},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-md text-xs font-medium hover:bg-blue-100 hover:border-blue-300 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(L,{size:14}),"View"]}),s.jsxs("button",{onClick:()=>O(e.id),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium hover:bg-red-100 hover:border-red-300 transition-all duration-200 shadow-sm hover:shadow-md",children:[s.jsx(q,{size:14}),"Delete"]})]})]},e.id))})]})}),N.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(k,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No tasks match the current filters."})]})]})]})})};export{ae as default};
